(function(){tinymce.PluginManager.requireLangPack('imagemapper');tinymce.create('tinymce.plugins.ImagemapperPlugin',{init:function(g,h){g.addCommand('mceImagemapper',function(){var a;var b;var c;var d='';var e=g.editorId.split("_");a=g.editorId.split("-");if(e[1]=="theorem"){if(e[2]=="content"){b="statementtheoremcontent"}else if(e[2]=="part"){b="parttheoremcontent"}}else if(e[1]=="info"){b="infocontent"}else if(e[1]=="imagemapper"){var f='';for(var i=1;i<a.length-1;i++){f+=a[i]+"-"}f+=a[a.length-1];d=f;c=e[2].split("-");b=e[1]+c[0]}else{c=e[2].split("-");b=e[1]+c[0]}for(var i=1;i<a.length-1;i++){b+=a[i]+"-"}b+=a[a.length-1];makeImagemapperDialog(g,b,d)});g.onNodeChange.add(function(a,b,n){if(a.selection.getContent()){b.setDisabled('imagemapper',false)}else{b.setActive('imagemapper',false);b.setDisabled('imagemapper',true)}});g.addButton('imagemapper',{title:'imagemapper.desc',cmd:'mceImagemapper',image:h+'/img/imagemapper.png'})},createControl:function(n,a){return null},getInfo:function(){return{longname:'Imagemapper plugin',author:'Ga Young Kim',authorurl:'http://ualberta.ca ',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/imagemapper',version:"1.0"}}});tinymce.PluginManager.add('imagemapper',tinymce.plugins.ImagemapperPlugin)})();function makeImagemapperDialog(b,c,d){var e=null;var f=document.createElement('div');var g=document.createElement('form');var h=document.createElement('div');var j=document.createElement('label');var k=document.createTextNode('Selected Text : ');var l=document.createElement('input');var m=document.createElement('label');var n=document.createTextNode('Imagemapper Type : ');var o=document.createElement('select');var p=document.createElement('option');p.value="Information";var q=document.createTextNode('Information');var r=document.createElement('option');r.setAttribute("value","External Link");var s=document.createTextNode('External Link');var t=document.createElement('option');t.setAttribute("value","Internal Reference");var u=document.createTextNode('Internal Reference');var v=document.createElement('option');v.setAttribute("value","External Reference");var w=document.createTextNode('External Reference');var x=null;if($.browser.msie){x=b.selection.getNode().childNodes[0].tagName}else{x=b.selection.getNode().tagName}p.setAttribute("selected","selected");p.appendChild(q);r.appendChild(s);t.appendChild(u);v.appendChild(w);var y=document.createElement('div');var z=document.createElement('div');var A=document.createElement('input');var B=document.createElement('input');if(d!=''){if(x!='A'){e=document.createElement("div");c=isExistingIndex(c+"-1");e.id='msm_imagemapper_container-'+c;e.className='msm_imagemapper_containers';var C=findParentDiv(d);$(C).append(e)}else{var D='';if($.browser.msie){D=b.selection.getNode().childNodes[0].id}else{D=b.selection.getNode().id}var E=/([A-Za-z]*?)(\d+)((?:-\d+)*)/;var F=b.editorId.split("-");var G=replaceIdEnding(b,F);var H=D.split("-");var I='';for(var i=1;i<H.length-2;i++){I+=H[i]+"-"}I+=H[H.length-2];c=I.replace(E,"$1"+G+"$3");e=document.getElementById('msm_imagemapper_container-'+c)}}else{e=document.getElementById('msm_imagemapper_container-'+c)}f.id='msm_imagemapper-'+c;e.setAttribute("title","Create Imagemapper");g.id='msm_imagemapper_form-'+c;h.className="msm_imagemapper_form_container";j.setAttribute("for",'msm_imagemapper_highlighted-'+c);j.appendChild(k);l.id='msm_imagemapper_highlighted-'+c;l.name='msm_imagemapper_highlighted-'+c;l.setAttribute("disabled","disabled");m.setAttribute("for",'msm_imagemapper_select-'+c);m.appendChild(n);o.id='msm_imagemapper_select-'+c;o.name='msm_imagemapper_select-'+c;o.onchange=function(a){changeForm(a,b,c)};y.id='msm_imagemapper_content_form_container-'+c;y.className="msm_imagemapper_content_form_containers";z.className='msm_imagemapper_button_container';A.setAttribute("type","button");A.id='msm_imagemapper_submit-'+c;A.className='msm_imagemapper_button';A.setAttribute("value","Save");A.onclick=function(){submitSubForm(b,c,d)};B.setAttribute("type","button");B.id='msm_imagemapper_cancel-'+c;B.className='msm_imagemapper_button';B.setAttribute("value","Cancel");B.onclick=function(){closeSubFormDialog(c)};var J=makeInfoForm(b,c);y.appendChild(J);o.appendChild(p);o.appendChild(r);o.appendChild(t);o.appendChild(v);z.appendChild(A);z.appendChild(B);h.appendChild(j);h.appendChild(l);h.appendChild(document.createElement('br'));h.appendChild(document.createElement('br'));h.appendChild(m);h.appendChild(o);h.appendChild(y);g.appendChild(h);g.appendChild(document.createElement('br'));g.appendChild(document.createElement('br'));g.appendChild(z);f.appendChild(g);createDialog(b,c)}