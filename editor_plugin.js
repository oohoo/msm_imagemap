(function(){tinymce.PluginManager.requireLangPack('imagemapper');tinymce.create('tinymce.plugins.ImagemapperPlugin',{init:function(g,h){g.addCommand('mceImagemapper',function(){var a;var b;var c;var d='';var e=g.editorId.split("_");a=g.editorId.split("-");if(e[1]=="theorem"){if(e[2]=="content"){b="statementtheoremcontent"}else if(e[2]=="part"){b="parttheoremcontent"}}else if(e[1]=="info"){b="infocontent"}else if(e[1]=="subordinate"){var f='';for(var i=1;i<a.length-1;i++){f+=a[i]+"-"}f+=a[a.length-1];d=f;c=e[2].split("-");b=e[1]+c[0]}else{c=e[2].split("-");b=e[1]+c[0]}for(var i=1;i<a.length-1;i++){b+=a[i]+"-"}b+=a[a.length-1];makeImagemapperDialog(g,b,d)});g.onNodeChange.add(function(a,b,n){var c=a.selection.getNode().tagName;if(c=="IMG"){b.setDisabled('imagemapper',false)}else{b.setActive('imagemapper',false);b.setDisabled('imagemapper',true)}});g.addButton('imagemapper',{title:'imagemapper.desc',cmd:'mceImagemapper',image:h+'/img/imagemapper.png'})},createControl:function(n,a){return null},getInfo:function(){return{longname:'Imagemapper plugin',author:'Ga Young Kim',authorurl:'http://ualberta.ca ',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/imagemapper',version:"1.0"}}});tinymce.PluginManager.add('imagemapper',tinymce.plugins.ImagemapperPlugin)})();function makeImagemapperDialog(a,b,c){var d=null;var e=null;if($.browser.msie){e=a.selection.getNode().childNodes[0]}else{e=a.selection.getNode()}d=document.getElementById('msm_imagemapper_container-'+b);if(d){$('#msm_imagemapper_container-'+b+" textarea").each(function(){if(tinymce.getInstanceById($(this).attr("id"))!=null){tinymce.execCommand('mceFocus',false,$(this).attr("id"));tinymce.execCommand('mceRemoveControl',false,$(this).attr("id"))}});$("#msm_imagemapper_container-"+b).empty().remove()}var f=findImgParentDiv(b);d=$("<div id='msm_imagemapper_container-"+b+"' class='msm_imagemapper_containers'></div>");$(d).attr("title","Create Imagemapper");var g=$("<form id='msm_imagemap_form'></form>");var h=$("<div id='msm_image_div-"+b+"' class='msm_image_divs'></div>");var i=$("<h3> Current Image Information </h3>");var j=$("<div id='msm_image_infodiv-"+b+"' class='msm_image_infodivs'></div>");var k=$("<div id='msm_image_accordiondiv-"+b+"' class='msm_image_accordiondivs'></div>");var l=$("<label for='msm_image_width_input-"+b+"'>Width: </label>");var m=$("<label for='msm_image_height_input-"+b+"'>Height: </label>");var n=$("<input id='msm_image_width_input-"+b+"' name='msm_image_width_input-"+b+"' disabled='disabled'>");var o=$("<input id='msm_image_height_input-"+b+"' name='msm_image_height_input-"+b+"' disabled='disabled'>");var p=$(e).attr("width");var q=$(e).attr("height");var r=$("<input type='checkbox' name='msm_image_inline"+b+"' id='msm_image_inline"+b+"' value='inline'>");var s=$("<label for='msm_image_inline"+b+"'> Inline</label>");var t=$("<label for='msm_image_align_selection-"+b+"'>Alignment: </label>");var u=$("<select id='msm_image_align_selection-"+b+"' name='msm_image_align_selection-"+b+"' disabled='disabled'>\n                            <option value='centre'>Centre</option>\n                            <option value='top'>Top</option>\n                            <option value='bottom'>Bottom</option>\n                        </select>");$(n).val(p);$(o).val(q);$(j).append(l);$(j).append(n);$(j).append("<br />");$(j).append(m);$(j).append(o);$(j).append("<br />");$(j).append(r);$(j).append(s);$(j).append("<br />");$(j).append(t);$(j).append(u);$(e).clone().appendTo(h);$(k).append(i);$(k).append(j);$(g).append(h);$(g).append(k);$(d).append(g);$(f).append(d);$("#msm_image_inline"+b).change(function(){if(this.checked){$("#msm_image_align_selection-"+b).removeAttr("disabled")}else{$("#msm_image_align_selection-"+b).attr("disabled","disabled")}});createImgDialog(a,b)}