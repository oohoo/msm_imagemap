(function(){tinymce.PluginManager.requireLangPack('imagemapper');tinymce.create('tinymce.plugins.ImagemapperPlugin',{init:function(g,h){g.addCommand('mceImagemapper',function(){var a;var b;var c;var d='';var e=g.editorId.split("_");a=g.editorId.split("-");if(e[1]=="theorem"){if(e[2]=="content"){b="statementtheoremcontent"}else if(e[2]=="part"){b="parttheoremcontent"}}else if(e[1]=="info"){b="infocontent"}else if(e[1]=="subordinate"){var f='';for(var i=1;i<a.length-1;i++){f+=a[i]+"-"}f+=a[a.length-1];d=f;c=e[2].split("-");b=e[1]+c[0]}else{c=e[2].split("-");b=e[1]+c[0]}for(var i=1;i<a.length-1;i++){b+=a[i]+"-"}b+=a[a.length-1];makeImagemapperDialog(g,b,d)});g.onNodeChange.add(function(a,b,n){var c=a.selection.getNode().tagName;if(c=="IMG"){b.setDisabled('imagemapper',false)}else{b.setActive('imagemapper',false);b.setDisabled('imagemapper',true)}});g.addButton('imagemapper',{title:'imagemapper.desc',cmd:'mceImagemapper',image:h+'/img/imagemapper.png'})},createControl:function(n,a){return null},getInfo:function(){return{longname:'Imagemapper plugin',author:'Ga Young Kim',authorurl:'http://ualberta.ca ',infourl:'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/imagemapper',version:"1.0"}}});tinymce.PluginManager.add('imagemapper',tinymce.plugins.ImagemapperPlugin)})();function makeImagemapperDialog(a,b,c){var d=null;var e=null;if($.browser.msie){e=a.selection.getNode().childNodes[0]}else{e=a.selection.getNode()}d=document.getElementById('msm_imagemapper_container-'+b);if(d){$('#msm_imagemapper_container-'+b+" textarea").each(function(){if(tinymce.getInstanceById($(this).attr("id"))!=null){tinymce.execCommand('mceFocus',false,$(this).attr("id"));tinymce.execCommand('mceRemoveControl',false,$(this).attr("id"))}});$("#msm_imagemapper_container-"+b).empty().remove()}var f=findImgParentDiv(b);d=$("<div id='msm_imagemapper_container-"+b+"' class='msm_imagemapper_containers'></div>");$(d).attr("title","Create Imagemapper");var g=$("<form id='msm_imagemap_form'></form>");var h=$("<div id='msm_image_div-"+b+"' class='msm_image_divs'></div>");var i=$("<div id='msm_image_accordiondiv-"+b+"' class='msm_image_accordiondivs'></div>");$(e).clone().appendTo(h);$(g).append(h);$(g).append(i);$(d).append(g);$(f).append(d);$("#msm_image_inline"+b).change(function(){if(this.checked){$("#msm_image_align_selection-"+b).removeAttr("disabled")}else{$("#msm_image_align_selection-"+b).attr("disabled","disabled")}});makeAccordion(e,b);createImgDialog(a,b)}